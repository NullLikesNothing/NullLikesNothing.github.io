<!DOCTYPE html>
<html>
  <head>
    <script>
      window.onmessage = e => {
        let d = e.data
        let s = e.source
        if (d.length == null || d.length === 0) {
          s.postMessage(["ERR","Usage: ['GET',<name>], ['SET',<name>,<data>], ['DEL',<name>]."], "*")
          return
        }
        if (d[0] === "GET") {
          if (d.length !== 2) {
            s.postMessage(["ERR","Arguments need to be exactly 2 for this operation."], "*")
            return
          }
          s.postMessage(["RES",localStorage.getItem(`XS_${d[1]}`)], "*")
        } else if (d[0] === "SET") {
          if (d.length !== 3) {
            s.postMessage(["ERR","Arguments need to be exactly 3 for this operation."], "*")
            return
          }
          localStorage.setItem(`XS_${d[1]}`,d[2])
          s.postMessage(["RES","OK"], "*")
        } else if (d[0] === "DEL") {
          if (d.length !== 2) {
            s.postMessage(["ERR","Arguments need to be exactly 2 for this operation."], "*")
            return
          }
          localStorage.removeItem(`XS_${d[1]}`)
        }
      }
    </script>
  </head>
  <body>
    <h2>Storage page.</h2>
    Nothing to see here.
  </body>
</html>
